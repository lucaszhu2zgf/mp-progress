/*! mp-progress.js v1.1.4 https://www.npmjs.com/package/mp-progress */
var t,e;t=window,e=function(){return n={},r.m=o=[function(t,e,o){"use strict";function n(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function i(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){var e,o,n;e=r,n=i[o=t],o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o.r(e);var c=function(){function f(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var e=t.canvasId,o=t.canvasSize,n=void 0===o?{width:0,height:0}:o,r=t.percent,i=void 0===r?100:r,a=t.barStyle,c=void 0===a?{}:a,l=t.needDot,s=void 0!==l&&l,d=t.dotStyle,h=void 0===d?[]:d;if(!e)throw"[初始化失败]: 缺少canvasId";this._context=wx.createSelectorQuery().in(t.context),this._percent=i<50?50:100<i?100:i,this._options={canvasId:e,needDot:s,dotStyle:h,canvasSize:n,barStyle:c}}var t,e,o;return t=f,(e=[{key:"draw",value:function(r){var v=this;void 0!==r?(r<0&&(r=0,console.warn("[参数percentagegit<0]: 已自动调整为0")),100<r&&(r=100,console.warn("[参数percentage>100]: 已自动调整为100")),this._context.select(this._options.canvasId).fields({node:!0,size:!0}).exec(function(t){var e=t[0].node,y=e.getContext("2d"),o=wx.getSystemInfoSync().pixelRatio;e.width=t[0].width*o,e.height=t[0].height*o,y.scale(o,o),v._options.percentage=+r||0;try{var n=function(){var p=v._options.barStyle;if(!(0<p.length))return console.warn("参数barStyle不符合要求，请检查"),{v:void 0};var t=function(){for(var t=0,e=0;e<p.length;e++){var o=p[e].width;t<o&&(t=o)}var n=0,r=Math.cos(2*Math.PI/360*((100-v._percent)/2/100*360)),n=100===v._percent?((Math.min(v._options.canvasSize.width,v._options.canvasSize.height)-2*t)/2).toFixed(2):(Math.min(v._options.canvasSize.width/2,(v._options.canvasSize.height-2*t)/(1+r))-t).toFixed(2),i=Math.round(v._options.canvasSize.width/2),a=0,a=100===v._percent?Math.round(v._options.canvasSize.height/2):Math.round(v._options.canvasSize.height/(1+r));if(v._options.needDot){if(!(0<v._options.dotStyle.length))return v._options.dotStyle,console.warn("参数dotStyle不完整，请检查"),{v:{v:void 0}};var c,l=v._options.dotStyle[0].r;t<l&&(n-=c=l-t+(v._options.dotStyle[0].shadow?l/2:0),100!==v._percent&&(a-=c))}y.translate(v.convertLength(i),v.convertLength(a));var s=100===v._percent?-90:360*((100-v._percent+(v._percent-50)/2)/100).toFixed(2);y.rotate(s*Math.PI/180),v._r=v.convertLength(n);for(var d,h=2*(v._options.percentage/100).toFixed(2)*Math.PI,f=0,u=p.length;f<p.length;f++)d=u,function(t){var e=p[t];y.beginPath(),y.arc(0,0,v._r,0,(t===d-1?h:2*Math.PI)*v._percent/100),y.lineWidth=v.convertLength(e.width),y.strokeStyle=v.generateBarFillStyle(y,e.fillStyle);var o=e.lineCap;o&&(y.lineCap=o),y.stroke()}(f)}();if("object"===a(t))return t.v;v._options.needDot&&v.drawBarCoordinateDot(y)}();if("object"===a(n))return n.v}catch(t){console.warn("[绘图过程出现错误]: ",t)}})):console.warn("[绘图过程出现错误]: 调用draw方法必须传入百分比参数")}},{key:"generateBarFillStyle",value:function(t,e){if("string"==typeof e)return e;for(var o=t.createLinearGradient(0,0,100,90),n=0;n<e.length;n++){var r=e[n];o.addColorStop(r.position,r.color)}return o}},{key:"convertLength",value:function(t){return+Math.round(wx.getSystemInfoSync().windowWidth*t/750)}},{key:"drawCircleWithFillStyle",value:function(t,e){t.beginPath(),t.arc(e.x,e.y,this.convertLength(e.r),0,2*Math.PI),t.fillStyle=e.fillStyle||"#ffffff",e.shadow&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=e.shadow,t.shadowBlur=this.convertLength(e.r/2)),t.fill()}},{key:"drawBarCoordinateDot",value:function(t){var e=360*(this._options.percentage/100*this._percent/100).toFixed(2),o="",n=0,r=0,r=e<=90?(o=2*Math.PI/360*e,n=(Math.cos(o)*this._r).toFixed(2),(Math.sin(o)*this._r).toFixed(2)):90<e&&e<=180?(o=2*Math.PI/360*(180-e),n=-(Math.cos(o)*this._r).toFixed(2),(Math.sin(o)*this._r).toFixed(2)):(n=180<e&&e<=270?(o=2*Math.PI/360*(e-180),-(Math.cos(o)*this._r).toFixed(2)):(o=2*Math.PI/360*(360-e),(Math.cos(o)*this._r).toFixed(2)),-(Math.sin(o)*this._r).toFixed(2));0<this._options.dotStyle.length?this.drawCircleWithFillStyle(t,i({x:n,y:r},this._options.dotStyle[0])):console.warn("参数dotStyle不完整，请检查"),1<this._options.dotStyle.length&&this.drawCircleWithFillStyle(t,i({x:n,y:r},this._options.dotStyle[1]))}}])&&r(t.prototype,e),o&&r(t,o),f}();e.default=c}],r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0).default;function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var o,n},"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MpProgress=e():t.MpProgress=e();